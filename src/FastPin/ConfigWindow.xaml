<Window x:Class="FastPin.ConfigWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="clr-namespace:FastPin.Converters"
        mc:Ignorable="d"
        Title="{conv:Localize Settings}" Height="400" Width="500"
        Background="{StaticResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="NoResize">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40"
                      ResizeBorderThickness="0"
                      GlassFrameThickness="0"
                      CornerRadius="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>
    
    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}" Padding="20,10">
            <Grid>
                <TextBlock Text="{conv:Localize Settings}" 
                           FontSize="18" FontWeight="SemiBold" 
                           Foreground="White"
                           VerticalAlignment="Center"/>
                
                <!-- Close Button -->
                <Button Content="✕" 
                        Click="CloseButton_Click"
                        Width="40" Height="30"
                        HorizontalAlignment="Right"
                        Foreground="White"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        FontSize="16"
                        VerticalContentAlignment="Center"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                                BorderThickness="0"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#E81123"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="20">
            <StackPanel>
                <!-- Language Section -->
                <Border Background="{StaticResource SurfaceBrush}" 
                        BorderBrush="{StaticResource BorderBrush}" 
                        BorderThickness="1" 
                        CornerRadius="6" 
                        Padding="15" 
                        Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="{conv:Localize LanguageSettings}" 
                                   FontSize="16" FontWeight="SemiBold" 
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{conv:Localize Language}" 
                                       VerticalAlignment="Center" 
                                       Margin="0,0,15,0"
                                       FontSize="14"/>
                            <ComboBox Grid.Column="1" 
                                      x:Name="LanguageComboBox"
                                      SelectedValuePath="Tag" 
                                      FontSize="14"
                                      Style="{StaticResource ModernComboBoxStyle}">
                                <ComboBoxItem Content="English" Tag="en-US"/>
                                <ComboBoxItem Content="中文" Tag="zh-CN"/>
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Database Section -->
                <Border Background="{StaticResource SurfaceBrush}" 
                        BorderBrush="{StaticResource BorderBrush}" 
                        BorderThickness="1" 
                        CornerRadius="6" 
                        Padding="15">
                    <StackPanel>
                        <TextBlock Text="{conv:Localize DatabaseSettings}" 
                                   FontSize="16" FontWeight="SemiBold" 
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   Margin="0,0,0,10"/>
                        
                        <!-- Database Type -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{conv:Localize DatabaseType}" 
                                       VerticalAlignment="Center" 
                                       Margin="0,0,15,0"
                                       FontSize="14"/>
                            <ComboBox Grid.Column="1" 
                                      x:Name="DatabaseTypeComboBox"
                                      SelectedValuePath="Tag"
                                      SelectionChanged="DatabaseTypeComboBox_SelectionChanged"
                                      FontSize="14"
                                      Style="{StaticResource ModernComboBoxStyle}">
                                <ComboBoxItem Content="SQLite" Tag="SQLite"/>
                                <ComboBoxItem Content="MySQL" Tag="MySQL"/>
                            </ComboBox>
                        </Grid>

                        <!-- MySQL Connection Settings -->
                        <StackPanel x:Name="MySqlSettingsPanel" Visibility="Collapsed" Margin="0,10,0,0">
                            <TextBlock Text="{conv:Localize MySqlConnectionSettings}" 
                                       FontSize="13" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       Margin="0,0,0,10"/>
                            
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{conv:Localize Server}" 
                                           VerticalAlignment="Center" FontSize="13"/>
                                <TextBox Grid.Column="1" x:Name="MySqlServerTextBox" 
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         FontSize="13"/>
                            </Grid>
                            
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{conv:Localize Port}" 
                                           VerticalAlignment="Center" FontSize="13"/>
                                <TextBox Grid.Column="1" x:Name="MySqlPortTextBox" 
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         FontSize="13"/>
                            </Grid>
                            
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{conv:Localize Database}" 
                                           VerticalAlignment="Center" FontSize="13"/>
                                <TextBox Grid.Column="1" x:Name="MySqlDatabaseTextBox" 
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         FontSize="13"/>
                            </Grid>
                            
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{conv:Localize Username}" 
                                           VerticalAlignment="Center" FontSize="13"/>
                                <TextBox Grid.Column="1" x:Name="MySqlUsernameTextBox" 
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         FontSize="13"/>
                            </Grid>
                            
                            <Grid Margin="0,0,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{conv:Localize Password}" 
                                           VerticalAlignment="Center" FontSize="13"/>
                                <PasswordBox Grid.Column="1" x:Name="MySqlPasswordBox" 
                                             Style="{StaticResource ModernPasswordBoxStyle}"
                                             FontSize="13"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,20,20,20">
            <Button Content="{conv:Localize Save}" 
                    Click="SaveButton_Click"
                    Style="{StaticResource ModernButtonStyle}"
                    Background="{StaticResource PrimaryBrush}"
                    Padding="20,8"
                    FontSize="14"
                    Margin="0,0,10,0"/>
            <Button Content="{conv:Localize Cancel}" 
                    Click="CancelButton_Click"
                    Style="{StaticResource ModernButtonStyle}"
                    Background="#666666"
                    Padding="20,8"
                    FontSize="14"/>
        </StackPanel>
    </Grid>
</Window>
