<Window x:Class="FastPin.ImageViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:FastPin.Converters"
        Title="Image Viewer" 
        Height="600" Width="800"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#CC000000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        KeyDown="Window_KeyDown"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
    
    <Grid>
        <!-- Close button -->
        <Button Content="âœ•" 
                HorizontalAlignment="Right" 
                VerticalAlignment="Top"
                Margin="10"
                Width="40"
                Height="40"
                FontSize="20"
                Foreground="White"
                Background="#CC333333"
                BorderThickness="0"
                Cursor="Hand"
                Click="CloseButton_Click"
                Panel.ZIndex="1">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            CornerRadius="20">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Button.Template>
            <Button.Style>
                <Style TargetType="Button">
                    <Setter Property="Background" Value="#CC333333"/>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#CC666666"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>

        <!-- Image container with transform -->
        <Grid x:Name="ImageContainer"
              Background="Transparent"
              ClipToBounds="True"
              PreviewMouseWheel="ImageContainer_PreviewMouseWheel"
              PreviewMouseLeftButtonDown="ImageContainer_PreviewMouseLeftButtonDown"
              PreviewMouseMove="ImageContainer_PreviewMouseMove"
              PreviewMouseLeftButtonUp="ImageContainer_PreviewMouseLeftButtonUp">
            <Image x:Name="ImageControl"
                   Source="{Binding ImageSource}"
                   Stretch="Uniform"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="50">
                <Image.RenderTransform>
                    <TransformGroup>
                        <TranslateTransform x:Name="ImageTranslateTransform" X="0" Y="0"/>
                        <ScaleTransform x:Name="ImageScaleTransform" ScaleX="1" ScaleY="1"/>
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>
        </Grid>

        <!-- Image info overlay -->
        <Border Background="#CC000000"
                VerticalAlignment="Bottom"
                Padding="15,10"
                Visibility="{Binding ImageMetadata, Converter={StaticResource StringToVisibilityConverter}}">
            <TextBlock Text="{Binding ImageMetadata}"
                       Foreground="White"
                       FontSize="13"
                       HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>
